<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    </head>
    <body>

        <!-- <a href="http://a.app.qq.com/o/simple.jsp?pkgname=com.edufound.mobile" id="openApp">点击打开</a> -->
        <a id='open' href="cloudunion://?param1=register.html&param2=">手动打开应用</a>

        <script type="text/javascript">

        function getUrlArgStr(){
            var q=location.search.substr(1);
            var qs=q.split('&');
            var argStr='';
            if(qs){
                for(var i=0;i<qs.length;i++){
                    argStr+=qs[i].substring(0,qs[i].indexOf('='))+'='+qs[i].substring(qs[i].indexOf('=')+1)+'&';
                }
            }
            return argStr;
        }
        //返回的是对象形式的参数
        function getUrlArgObject(){
            var args=new Object();
            var query=location.search.substring(1);//获取查询串
            var pairs=query.split(",");//在逗号处断开
            for(var i=0;i<pairs.length;i++){
                var pos=pairs[i].indexOf('=');//查找name=value
                if(pos==-1){//如果没有找到就跳过
                    continue;
                }
                var argname=pairs[i].substring(0,pos);//提取name
                var value=pairs[i].substring(pos+1);//提取value
                args[argname]=unescape(value);//存为属性
            }
            return args;//返回对象
        }
        var args = getUrlArgObject();
        $('a').attr('href', 'cloudunion://?param1=' + args['param1'] + '&' + 'param2=' + args['param1']);
        window.location.href = 'cloudunion://?param1=' + args['param1'] + '&' + 'param2=' + args['param1'];
// a.Attribute.href = 'cloudunion://?param11' + args['param1'] + '&' + 'param2=' + args['param1'];
            //安卓
//          /**/window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.edufound.mobile";

                // 通过iframe的方式试图打开APP，如果能正常打开，会直接切换到APP，并自动阻止a标签的默认行为
                // 否则打开a标签的href链接
                // var ifr = document.createElement('iframe');
                // ifr.src = 'baidumap://';
                // ifr.style.display = 'none';
                // document.body.appendChild(ifr);
                // window.setTimeout(function(){
                //     document.body.removeChild(ifr);
                // },3000);

                // api.addEventListener({
                //     name : 'appintent'
                // }, function(ret, err) {
                //     //得到参数 进行跳转
                //     url = ret.appParam.param1 != '' ? ret.appParam.param1 : '';
                //     referrer = ret.appParam.param2 != '' ? ret.appParam.param2 : '';
                // });
        </script>
    </body>
<script type="text/javascript" src="../script/apiURL.js"></script>
</html>
